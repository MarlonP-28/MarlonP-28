<div>
    <h1 class="titulo text-center">Historial de Archivos</h1>
</div>

<div class="table-responsive">
    <table id="archiveTable" class="table table-bordered">
        <thead>
            <tr>
                <th>N°</th>
                <th>Facultad</th>
                <th>Carrera</th>
                <th>Área</th>
                <th>Subárea</th>
                <th>Serie</th>
                <th>Subserie</th>
                <th>Periodo/Año</th>
                <th>Asunto</th>
                <th>Observaciones</th>
                <th>Acciones</th>
            </tr>
        </thead>

        <tbody>
            {{#each notes}}
            <tr>
                <td>{{@index}}</td>
                <td>{{facultad}}</td>
                <td>{{carrera}}</td>
                <td>{{area}}</td>
                <td>{{subArea}}</td>
                <td>{{tipoDocumento}}</td>
                <td>{{subTipoDocumento}}</td>
                <td>{{periodo}}</td>
                <td>{{asunto}}</td>
                <td>{{observaciones}}</td>
                <td>
                    <div class="btn-group" role="group">
                        <a href="/notes/edit/{{_id}}" class="btn btn-success btn-sm common-btn">
                            <i class="fas fa-edit"></i>
                            <span class="ml-2">Editar</span>
                        </a>

                        <!-- DELETE REQUEST -->
                        <form id="deleteForm" action="/notes/delete/{{_id}}?_method=DELETE" method="POST"
                            class="d-inline">
                            <input type="hidden" name="_method" value="DELETE">
                            <button type="button" class="btn btn-danger btn-sm common-btn" onclick="confirmDelete()">
                                <i class="fas fa-trash-alt"></i>
                                <span class="ml-2">Eliminar</span>
                            </button>
                        </form>

                        <!-- Script para mostrar el mensaje de confirmación -->
                        <script>
                            function confirmDelete() {
                                var result = confirm("¿Está seguro que desea eliminar este archivo?");
                                if (result) {
                                    // Si el usuario hace clic en "Sí", entonces envía el formulario
                                    document.getElementById("deleteForm").submit();
                                }
                            }
                        </script>


                        <a href="/notes/view/{{_id}}" class="btn btn-info btn-sm common-btn">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            <span class="ml-2">Visualizar</span>
                        </a>
                    </div>

                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>

   <div class="mt-4">
        <a href="/notes/add" class="btn btn-primary">
            <i class="fas fa-plus"></i> <!-- Ícono -->
            <span class="ml-2">Nuevo</span> <!-- Texto con margen a la izquierda (ml-2) -->
        </a>
        <a href="/notes/find" class="btn btn-primary">
            <i class="fas fa-magnifying-glass"></i> <!-- Ícono -->
            <span class="ml-2">Buscar</span> <!-- Texto con margen a la izquierda (ml-2) -->
        </a>

   </div>


<script src="/js/script.js"></script>
<script>
    // Configuración de DataTablesa
    $(document).ready(function () {
        $('#archiveTable').DataTable({
            language: {
                url: "https://cdn.datatables.net/plug-ins/1.10.24/i18n/Spanish.json"
            }
        });
    });
</script>